<!DOCTYPE html>
<html>

<head>
	<title>Active Coping</title>

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="stylesheet" media="screen" href="../style/bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" media="screen" href="../style/bootstrap/css/bootstrap-responsive.css">
	<link rel="stylesheet" media="screen" href="../style/cbits.css">        <link rel="stylesheet" type="text/css" href="../holo/holo-base-elements.css" />
    <link rel="stylesheet" type="text/css" href="../holo/holo-light-elements.css" />
    <link rel="stylesheet" type="text/css" href="../holo/holo-base-widgets.css" />
    <link rel="stylesheet" type="text/css" href="../holo/holo-light-widgets.css" />
    <link rel="stylesheet" media="screen" href="../js/vendor/tourist.css">
	<link rel="stylesheet" media="screen" href="../js/vendor/jquery.qtip.min.css">


	<style>
		label, span {
			padding-top: 10px;
		}
	</style>


	<script src="../js/vendor/jquery-2.0.3.min.js"></script>
	<script src="../js/vendor/date.js"></script>
	<script src="../js/vendor/lodash.min.js"></script>
	<script src="../style/bootstrap/js/bootstrap.min.js"></script>
	<script src="../js/vendor/md5.js"></script>

	<script src="../js/cbits.js"></script>


	<script type="text/javascript">

		/**
		 * On: Page-load.
		 * @return {[type]} [description]
		 */
		$(document).ready(function() {
  STEPS = [{
    content: 'The Active Coping tool walks you through some steps to identify avoidance and to create a more useful coping response',
    highlightTarget: false,
    nextButton: true,
    target: $('#lessons-widget'),
    my: 'top center',
    at: 'top center'
  },{ 
  	content: 'The first step is noticing an example of avoidance. This can be hard at first, but if you think about it you usually know when there is something you need to be doing,
    highlightTarget: false,
    nextButton: true,
    target: $('#calendar-widget'),
    my: 'top center',
    at: 'top center'
  },{
    content: 'The next step is being specific about what you are avoiding. Is it a task, a feeling, a person. What is it that makes what you are avoiding so bad?',
    highlightTarget: false,
    nextButton: true,
    target: $('#traptrac-widget'),
    my: 'top center',
    at: 'top center'
  },{
    content: 'Then, it's helpful to note what you did instead. Like watching TV instead of doing the laundry',
    highlightTarget: false,
    nextButton: true,
    target: $('#copingcard-widget'),
    my: 'top center',
    at: 'top center'
  },{
    content: 'If this activity is already on your Activity Tracker you can indicate that here to provide more information about the activity',
    highlightTarget: false,
    nextButton: true,
    target: $('#checkin-widget'),
    my: 'top center',
    at: 'top center'
  },{
    content: 'What was the result of your avoidance? Think about both the short-term and long-term consequences. Sometimes avoidance helps in the short-term but makes things worse in the long-term',
    highlightTarget: false,
    nextButton: true,
    target: $('#oracle-widget'),
    my: 'top center',
    at: 'top center'
  },{
  	 content: 'Lastly, what could you do differently. What would be a response that would deal with the issue more directly?',
    highlightTarget: false,
    nextButton: true,
    target: $('#oracle-widget'),
    my: 'top center',
    at: 'top center'
  },{
  	 content: 'When you have finished all these steps. Click submit to save your information',
    highlightTarget: false,
    nextButton: true,
    target: $('#oracle-widget'),
    my: 'top center',
    at: 'top center'
  },{
    content: 'Labs',
    highlightTarget: false,
    nextButton: true,
    target: $('#labs'),
    my: 'top center',
    at: 'top center'
  },{
    content: 'Tour',
    highlightTarget: false,
    nextButton: true,
    target: $('#replay-tour'),
    my: 'top center',
    at: 'top center'
  }]

  TOUR = new Tourist.Tour({
    // stepOptions: STEP_OPTIONS,
    steps: STEPS,
    //cancelStep: @finalQuit
    //successStep: @finalSucceed
    tipClass: 'QTip',
    tipOptions:{
      style: {
        classes: 'qtip-tour qtip-bootstrap'
      }
    }
  });
  TOUR.start();

  $("#replay-tour").on("click", function(ev){TOUR.start();});
			/**
			 * User clicked the "submit" button.
			 * @return {[type]} [description]
			 */
			$("#submit").click(function() {
				// TODO: CHANGE ME!
				var userId = TMPUSERID;

				// console.log('FOO');
				var userResponses = {
					q1txt: $("#q1").val(),
					q1yesNo: $(".q1>div[data-toggle='buttons-radio']>button.active").text(),
					q2txt: $("#q2").val(),
					q3txt: $("#q3").val(),
					q4yesNo: $(".q4>div[data-toggle='buttons-radio']>button.active").text(),
					q5txt: $("#q5").val(),
					q6txt: $("#q6").val()
				};
				console.log("userResponses = ", userResponses);

				// POST the user responses to the "TRAPTRAC" PRW
				postToPRImporter(prwAddrHostAndPortHttps, userId, DSTTABLE, userResponses,
					function(cbData, responseData, postData, postUrl) {
						console.log("responseData = ", responseData);
						console.log("postData = ", postData);
						console.log("postUrl = ", postUrl);
						console.log("cbData.dateTimeBeforeCall = " + cbData.dateTimeBeforeCall + "; compare to curr datetime = " + new Date());
					},
					{
						dateTimeBeforeCall: new Date()
					}
				);
			});

		});


	</script>

</head>


<body>
	<div class="row-fluid">
		<div class="span1"></div>

		<div class="span10">
			<h3 class="a1">Active Coping</h3>
			
			<form id="edit-event" class="form-horizontal widget-content form-condensed" name="edit-event">
				<textarea id="q1" name="q1" rows="4" cols="50" class="span12" placeholder="Have you done anything today that was an example of avoidance, procrastination, or escapism? Enter it here."></textarea><br />
				<div class="row-fluid q1">
					<div class="span1"></div>
					<div data-toggle="buttons-radio"><button id="q1Yes" name="q1Yes" type="button" class="span5 btn btn-primary">Yes</button><button id="q1No" name="q1No" type="button" class="span5 btn btn-primary">No</button></div><br /><br />
				</div>

				<span>What did you avoid?</span><br />
				<textarea id="q2" name="q2" rows="4" cols="50" class="span12" placeholder="Enter what you avoided. For example, it could be a chore, work task, school work, or important conversation." placeholder="Enter what you avoided. For example, it could be a chore, work task, school work, or important conversation."></textarea><br />
				
				<span>What did you do instead?</span><br />
				<textarea id="q3" name="q3" rows="4" cols="50" class="span12" placeholder="Enter what you did instead. For example, it could be watching TV, surfing the Internet, or even something else but that puts off what you really need to be doing."></textarea><br />

				<div><span>Is this activity on the activity tracker?</span></div><br />
				<div class="row-fluid radio q4">
					<div class="span1"></div>
					<div data-toggle="buttons-radio"><button id="q4Yes" name="q4Yes" type="button" class="span5 btn btn-primary">Yes</button><button id="q4No" name="q4No" type="button" class="span5 btn btn-primary">No</button></div><br /><br />
				</div>
				

				<span>What were the consequences?</span><br /><textarea id="q5" name="q6" rows="4" cols="50" class="span12" placeholder="Enter what happened as a result of your avoidance. Did the task or problem get bigger?"></textarea><br />
				<span>What could you do differently?</span><br /><textarea id="q6" name="q6" rows="4" cols="50" class="span12" placeholder="Come up with an alternative coping response that would be more active and help deal with the task or problem."></textarea><br />

				<div class="row-fluid">
					<div class="span1"></div>
					<input class="span10 btn" id="submit" name="submit" type="button" value="submit" />
				</div>
	
			</form>
		</div>
	
		<div class="span1"></div>

	</div>
</body>

</html>